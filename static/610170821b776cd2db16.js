"use strict";(self.webpackChunkcloud_onchain_trade_sdk=self.webpackChunkcloud_onchain_trade_sdk||[]).push([[5115],{73900:(e,t,a)=>{a.d(t,{D:()=>T});var i=a(50650),n=a(5842),s=a(56231),l=a(70143),o=a(12466),r=a(64999),c=a(17921);const u=(e,t=18)=>new c.Z(e).shiftedBy(t).toString(10);var d=a(24121),m=a(12559),h=a(63299),p=a(7384),x=a(52983),f=a(84033),g=a(94635),b=a(25315),E=a(69685),v=a(5549),P=a(79705),N=a(59713),C=a(17197);const w={xl:{width:"18px",height:"48px",mr:"5px"},l:{width:"18px",height:"24px",mr:"5px"},m:{width:"18px",height:"24px",mr:"5px"},xs:{width:"18px",height:"12px",mr:"5px"}},y={":disabled:not(.inactive),:hover:not(:disabled):not(:active)":{backgroundColor:"button.defaultBg",backgroundImage:"none",borderColor:"t.third",color:"button.disableColor"}},I=(0,x.forwardRef)((({loading:e,children:t,sz:a="m",sx:i={},spinnerProps:n={},...s},l)=>{const o=w[a]||{},r=e?y:{},{sx:c={},...u}=n,d=(0,x.useCallback)(((...t)=>e?null:s.onClick&&s.onClick(...t)),[s.onClick,e]);return x.createElement(N.Z,{ref:l,sx:{...r,...i},disabled:e,sz:a,...s,onClick:d},e&&x.createElement(C.Z,{itemsColor:"button.disableColor",sx:{...o,...c},...u}),x.createElement(p.Z,{display:"inherit"},t))}));I.displayName="LoadingButton";const O=I;var L=a(70165);const D=({approve:e,getI18n:t,children:a,refetch:i,disabled:n})=>{const{submit:s}=(0,L.t)({getI18n:t}),[l,o]=(0,x.useState)(!1),[r,c]=(0,x.useState)(!1),u=!(!l||r)||n,d=(0,x.useCallback)((()=>{return t=void 0,a=void 0,l=function*(){o(!0),c(!1);try{e&&(yield s(e))}catch(e){c(!0)}i(),o(!1)},new((n=void 0)||(n=Promise))((function(e,i){function s(e){try{r(l.next(e))}catch(e){i(e)}}function o(e){try{r(l.throw(e))}catch(e){i(e)}}function r(t){var a;t.done?e(t.value):(a=t.value,a instanceof n?a:new n((function(e){e(a)}))).then(s,o)}r((l=l.apply(t,a||[])).next())}));var t,a,n,l}),[s,e,i]);return(0,x.useMemo)((()=>x.createElement(O,{type:"button",sx:{width:"100%",height:"100%"},loading:l&&!r,onClick:d,disabled:u},a)),[u,a,d,r,l])};var k=a(18868);const S=({label:e,value:t,className:a})=>(0,x.useMemo)((()=>x.createElement("div",{className:(0,k.cn)("flex flex-col flex-[1]",a)},x.createElement("div",{className:"text-caption text-t-third"},e),x.createElement("div",{className:"text-t-primary text-subtitle2"},t))),[e,a,t]),M=[{key:"0.25",label:"25%"},{key:"0.5",label:"50%"},{key:".75",label:"75%"},{key:"1",label:"100%"}],_={sx:{paddingBottom:"2px",borderRadius:0,border:"none",borderBottom:"1px solid",borderColor:"t.third",width:"100%",height:"40px",input:{textAlign:"left",px:0},".bn-input-suffix":{mr:"0px !important"}}},R={".add-margin-input":{">div":{borderRadius:"0 !important"}}},A=({hash:e,onClose:t})=>{const a=(0,E.h)(),{getI18n:i,usePositionAddMargin:o,onChainPerpContractAddress:r,useActionBtnDisabled:P}=(0,x.useContext)(v.Z),{disabled:N}=P(),[C,w]=(0,x.useState)(-1),[y,I]=(0,x.useState)("0"),[O,L]=(0,x.useState)(""),{symbol:k,side:A,marginToken:T,marginQtyPrecision:F,pricePrecision:z,formatNumber:Z,calcMargin:B,calcLeverage:q,calcLiqPrice:U,useTokenApprove:V,useContractAddMargin:H}=o(e),{address:Q}=(0,d.mA)(),{chain:j}=(0,d.LN)(),$=b.KF.has(T)?"":T,{data:G}=(0,d.dQ)({address:$||void 0}),{decimals:K=(null==j?void 0:j.nativeCurrency.decimals),symbol:W=(0,b.De)(null==j?void 0:j.nativeCurrency.symbol)}=G||{},{data:Y}=(0,d.KQ)({address:Q,token:$,enabled:Boolean(void 0!==$),cacheTime:b.g_,watch:!0}),{approve:J}=V($,m.parseUnits(y,K)),{addMargin:X}=H(),ee=(0,x.useMemo)((()=>{var e;return new c.Z(null!==(e=null==Y?void 0:Y.formatted)&&void 0!==e?e:0).toFixed(F,c.Z.ROUND_DOWN)}),[null==Y?void 0:Y.formatted,F]),{data:te,refetch:ae}=(0,d.do)({address:$,abi:h.em,functionName:"allowance",args:[Q,r],enabled:Boolean($)&&Boolean(Q)&&Boolean(r)}),ie=(0,x.useCallback)((()=>t()),[t]),ne=(0,x.useCallback)((e=>{I(e||"0"),w(-1)}),[]),se=(0,x.useCallback)(((e,t)=>{w(e),I(new c.Z(t).multipliedBy(ee).toFixed(F,c.Z.ROUND_DOWN))}),[ee,F]),le=(0,x.useCallback)((()=>{X({hash:e,amount:u(y,K),marginToken:$,closeModalCallBack:ie})}),[X,ie,e,K,y,$]),oe=(0,x.useMemo)((()=>new c.Z(ee).isLessThanOrEqualTo(0)||new c.Z(ee).isLessThan(y)?{label:i("userinfo-dialog-margin-insufficient-balance","Insufficient balance"),disabled:!0}:{label:x.createElement("div",{className:"flex items-center"},x.createElement(n.b,{className:"mr-2",width:"20px",height:"20px",fontSize:"20px"}),x.createElement("span",null,i("userinfo-dialog-margin-button-confirm","Add Margin"))),disabled:new c.Z(y).isLessThanOrEqualTo(0)}),[i,y,ee]),re=(0,x.useMemo)((()=>B(y).toString()),[B,y]),ce=(0,x.useMemo)((()=>q(re).toString()),[q,re]),ue=(0,x.useMemo)((()=>{const e=U(re);return e.isNegative()?"-":Z(e.toString(),z)}),[U,re,Z,z]),de=a[W]||W;return(0,x.useMemo)((()=>x.createElement(p.Z,{sx:R},x.createElement("div",{className:"flex items-center sm:hidden mb-[16px]"},x.createElement("div",{className:"flex-[1] text-t-primary text-subtitle1 text-center"},i("userinfo-dialog-margin-add-margin","Add Margin")),x.createElement(s.E,{onClick:ie,className:"w-5 h-5 text-[20px] text-t-third cursor-pointer absolute right-4"})),x.createElement("div",{className:"flex flex-col"},x.createElement("div",{className:"flex flex-row items-center justify-between"},x.createElement("div",{className:"text-t-primary text-subtitle2"},k," ",A),x.createElement(s.E,{width:"20px",height:"20px",fontSize:"20px",className:"text-t-third cursor-pointer absolute right-[16px] hidden sm:flex",onClick:ie})),x.createElement("div",{className:"flex justify-between my-[16px]"},x.createElement(S,{className:"text-left",label:i("userinfo-positions-column-leverage","Leverage"),value:`${Z(ce,1)}x`}),x.createElement(S,{className:"text-center",label:i("userinfo-positions-column-initialMargin","Initial Margin"),value:`${Z(re,F)} ${de}`}),x.createElement(S,{className:"text-right",label:i("userinfo-positions-column-liquidPriceV2","Liq. Price"),value:ue})),x.createElement("div",{className:"rounded p-4 flex mb-4 flex-col bg-interactive-interactive01 order-form-card"},x.createElement("div",{className:"flex flex-row justify-between mb-2"},x.createElement("div",{className:"text-t-primary text-subtitle2"},i("userinfo-dialog-margin-add-margin","Add Margin")),x.createElement("div",{className:"text-t-secondary text-caption"},i("userinfo-dialog-margin-user-avail",{defaultValue:"Available : {{available}} {{margin}}",available:ee,margin:de}))),x.createElement(f.Q,{className:`add-margin-input h-[40px] mt-[4px] rounded-0 ${O?"border-interactive-primary":"!border-t-third"} border-t-0 border-x-0 [&>input]:text-left`,precision:F,maxLength:19,boxProps:_,value:y,onChange:ne,onFocus:()=>L("focus"),onBlur:()=>L(""),suffix:x.createElement("div",{className:"text-body2 text-t-primary"},de)})),x.createElement(g.W,{activeIndex:C,options:M,onChange:se}),x.createElement("div",{className:"flex mt-8 h-10"},$&&te&&!new c.Z(u(y,K)).isLessThanOrEqualTo(te.toString())&&new c.Z(y).isLessThanOrEqualTo(ee)?x.createElement(D,{approve:J,getI18n:i,refetch:ae,disabled:N},i("userinfo-dialog-margin-increase-authorized-amount",{defaultValue:"Increase {{symbol}} authorization amount",symbol:de})):x.createElement(l.z,{className:"w-full text-subtitle2",disabled:oe.disabled||N,onClick:le},oe.label))))),[i,ie,k,A,Z,ce,re,F,de,ue,ee,O,y,ne,C,se,$,te,K,J,ae,N,oe.disabled,oe.label,le])},T=()=>{const[e,t]=(0,x.useState)(""),{isMobile:a}=(0,i.F)(),n=(0,x.useCallback)((()=>{t("")}),[]);return(0,x.useEffect)((()=>P.ee.on("MODAL_ADD_MARGIN_OPEN",(({hash:e})=>{t(e)}))),[]),(0,x.useEffect)((()=>P.ee.on("MODAL_ADD_MARGIN_CLOSE",(()=>{t("")}))),[]),(0,x.useMemo)((()=>e?a?x.createElement(o.yo,{open:!0},x.createElement(o.ue,{side:"bottom",className:"w-full border-none p-4 pb-6 rounded-t-[4px] bg-interactive-interactiveBg",onPointerDownOutside:n},x.createElement(A,{hash:e,onClose:n}))):x.createElement(r.Vq,{open:!0},x.createElement(r.PK,null,x.createElement(r.cZ,{className:"w-full sm:w-[320px] p-4 min-h-[384px] sm:min-h-[332px]",onPointerDownOutside:n},x.createElement(A,{hash:e,onClose:n})))):null),[e,a,n])}},91993:(e,t,a)=>{a.d(t,{t:()=>d});var i=a(1750),n=a(64999),s=a(70143),l=a(5842),o=a(52983),r=a(58106),c=a(5549),u=a(79705);const d=()=>{const{getI18n:e,useActionBtnDisabled:t,useColumnSymbol:a,useColumnPNL:d,useLeverage:m}=(0,o.useContext)(c.Z),{disabled:h}=t(),[p,x]=(0,o.useState)(""),{symbolType:f}=a(p),{ROIInNumber:g,isROINegative:b}=d(p),E=m(p),{min:v}=(0,r.Fe)(E.toNumber()),{isDegenMode:P}=(0,i.L)(f),N=(0,o.useCallback)((()=>{x("")}),[]),C=(0,o.useCallback)((({hash:e})=>x(e)),[]),w=(0,o.useCallback)((()=>{u.ee.emit("POSITION_CLOSE",{hash:p}),N()}),[p,N]);return(0,o.useEffect)((()=>(u.ee.on("MODAL_CLOSE_POSITION",C),u.ee.on("MODAL_CLOSE_POSITION_CLOSE",N),()=>{u.ee.off("MODAL_CLOSE_POSITION",C),u.ee.off("MODAL_CLOSE_POSITION_CLOSE",N)})),[N,C]),o.createElement(n.Vq,{open:Boolean(p)},o.createElement(n.PK,null,o.createElement(n.cZ,{className:"!w-[298px] !min-h-[186px]",onPointerDownOutside:N},o.createElement("div",{className:"flex flex-col"},o.createElement("div",{className:"flex w-full justify-between h-[38px] items-center"},o.createElement("div",{className:"text-t-primary text-subtitle1"},e("userinfo-positions-close-position-title",{defaultValue:"Close Position"})),o.createElement(n.GG,{onClick:N,className:"[&_svg]:w-5 [&_svg]:h-5 [&_svg]:text-[20px]"})),o.createElement("div",{className:"flex-1 pt-4 pb-10"},P&&!b&&g<v?o.createElement("div",{className:"text-body2 text-t-primary"},e("userinfo-positions-close-position-pnl-loss-close-patch1",{defaultValue:"When ROI is less than {rate}%, there may be a loss after closing the position due to close position fees.",rate:v})):null,o.createElement("div",{className:"text-body2 text-t-primary"},e("userinfo-positions-close-position-desc",{defaultValue:"Are you sure to close your position?"}))),o.createElement("div",{className:"flex w-full justify-between items-center"},o.createElement(s.z,{className:"text-subtitle2 flex-[1] j-10 !mr-2",onClick:N,variant:"secondary"},e("userinfo-positions-close-position-cancel",{defaultValue:"Cancel"})),o.createElement(s.z,{className:"text-subtitle2 flex-[1] h-10",onClick:w,disabled:h},o.createElement("div",{className:"flex items-center"},o.createElement(l.b,{className:"mr-2",width:"20px",height:"20px",fontSize:"20px"}),o.createElement("span",null,e("userinfo-positions-close-position-confirm",{defaultValue:"Confirm"})))))))))}},16280:(e,t,a)=>{a.d(t,{F:()=>k});var i=a(50650),n=a(56231),s=a(68761),l=a(12466),o=a(64999),r=a(17921),c=a(52983),u=a(82526),d=a(31558),m=a(38528);const h=({hash:e,onClose:t})=>{const{getI18n:a,usePositionDetail:i}=(0,c.useContext)(m.C),{usePositionDetailSymbol:s}=i(),{symbol:l,isLong:o,symbolName:r}=s(e);return(0,c.useMemo)((()=>c.createElement("div",{className:"items-center flex justify-between mb-4"},c.createElement("div",{className:"text-subtitle1 text-t-primary font-[500]"},r||l," ",o?a("orderForm-long","Long"):a("orderForm-short","Short")),c.createElement(n.E,{width:"20px",height:"20px",fontSize:"20px",className:"text-t-third cursor-pointer absolute right-4",onClick:t}))),[a,o,t,l,r])},p=({hash:e})=>{const{getI18n:t,usePositionDetail:a,staticHost:i}=(0,c.useContext)(m.C),{usePositionDetailLeverage:n,usePositionDetailPNLROI:s,usePositionDetailSymbol:l}=a(),{isPNLNegative:o,isPNLPositive:r}=s(e),{symbolType:h}=l(e),p=n(e);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-leverage","Leverage")},c.createElement("div",{className:"flex items-center gap-[2px]"},p,c.createElement(d.b,{isPNLNegative:o,isPNLPositive:r,staticHost:i,symbolType:h})))},x=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(m.C),{usePositionDetailInitialMargin:i}=a(),n=i(e),s=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-initialMargin-tips01","Initial Margin is the margin initially allocated to this position.")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line mt-3",color:"t.white"},t("userinfo-dialog-detail-position-initialMargin-tips02","Initial Margin = Principal - Open Fee")))),[t]);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-initialMargin","Initial Margin"),tips:s,showLabelSx:!0},n)},f=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(m.C),{usePositionDetailQtyAndSize:i,usePositionDetailPair:n}=a(),{baseAsset:s}=n(e),{size:l,qty:o}=i(e);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-qty","QTY(Size)")},o," ",s," ( ≈ ",l," USD )")},g=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(m.C),{usePositionDetailEntryPrice:i}=a(),n=i(e);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-entryPrice","Entry Price")},n," USD")},b=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(m.C),{usePositionDetailLiquidPrice:i}=a(),n=i(e);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-estLiquidPrice","Est. Liquid Price")},n," USD")},E=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(m.C),{usePositionDetailLiqLostRate:i}=a(),n=i(e);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-liquidLostRate","Liquid Lost Rate")},`${new r.Z(n).multipliedBy(100).toFixed(2)}%`)},v=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(m.C),{usePositionDetailFundingFee:i}=a(),{fundingFee:n,isFundingFeeNegative:s}=i(e);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-accFundingFee","Acc. Funding Fee")},c.createElement("div",{className:"text-subtitle2",style:{color:s?"var(--colors-t-sell)":"var(--colors-t-buy)"}},n))},P=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(m.C),{usePositionDetailPNLROI:i}=a(),{PNL:n,isPNLNegative:s}=i(e),l=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-unrealizedPnl-tips01","Unrealized PNL only calculates the profit and loss generated after the position is successfully opened.")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line mt-3",color:"t.white"},t("userinfo-dialog-detail-position-unrealizedPnl-tips02","Long : Unrealized PNL = (Mark Price - Entry Price) * Qty + Funding Fee")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-unrealizedPnl-tips03","Short : Unrealized PNL = (Entry Price - Mark Price ) * Qty + Funding Fee")))),[t]);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-unrealizedPnl","Unrealized PNL"),tips:l,showLabelSx:!0},c.createElement("div",{className:"text-subtitle2",style:{color:s?"var(--colors-t-sell)":"var(--colors-t-buy)"}},n))},N=({hash:e})=>{const{getI18n:t,usePositionDetail:a,enableShare:i,ee:n}=(0,c.useContext)(m.C),{usePositionDetailPNLROI:l}=a(),{ROI:o,isROINegative:r}=l(e),d=(0,c.useCallback)((()=>n.emit("MODAL_POSITION_SHARE_OPEN",{hash:e,overlay:!0})),[n,e]),h=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-unrealizedROI-tips01","Unrealized ROI = Unrealized PNL / Initial margin * 100%")))),[t]);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-unrealizedROI","Unrealized ROI"),tips:h,showLabelSx:!0},c.createElement("div",{className:"text-subtitle2",style:{color:r?"var(--colors-t-sell)":"var(--colors-t-buy)"}},o),i&&c.createElement("div",null,c.createElement(s.f,{className:"relative ml-0.5 cursor-pointer text-t-third",width:"16px",height:"16px",fontSize:"16px",onClick:d})))},C=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(m.C),{usePositionDetailOpenFee:i}=a(),n=i(e);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-openFee","Open Fee")},n)},w=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(m.C),{usePositionDetailExecutionFee:i}=a(),n=i(e);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-executionFee","Execution Fee")},n)},y=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(m.C),{usePositionDetailNetProfit:i}=a(),{netProfit:n,isNetProfitNegative:s}=i(e),l=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-netProfit-tips01","Net Profit is the profit and loss obtained after taking into account the trader's principal and trading fees.")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line mt-3",color:"t.white"},t("userinfo-dialog-detail-position-netProfit-tips02","Net Profit = Unrealized PNL - Open Fee")))),[t]);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-netProfit","Net Profit"),tips:l,showLabelSx:!0},c.createElement("div",{className:"text-subtitle2",style:{color:s?"var(--colors-t-sell)":"var(--colors-t-buy)"}},n))},I=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(m.C),{usePositionDetailDuration:i}=a(),{time:n}=i(e);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-time","Time")},n)},O=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(m.C),{usePositionDetailDuration:i}=a(),{duration:n}=i(e);return c.createElement(u.Z,{label:t("userinfo-dialog-detail-duration","Duration")},n)},L=({hash:e})=>c.createElement("div",{className:"flex gap-6 flex-col sm:flex-row max-h-[80vh] sm:max-h-[unset] overflow-auto sm:overflow-hidden"},c.createElement("div",{className:"flex flex-col w-full sm:w-1/2 gap-4"},c.createElement(p,{hash:e}),c.createElement(x,{hash:e}),c.createElement(f,{hash:e}),c.createElement(g,{hash:e}),c.createElement(b,{hash:e}),c.createElement(E,{hash:e}),c.createElement(v,{hash:e}),c.createElement(P,{hash:e}),c.createElement(N,{hash:e})),c.createElement("div",{className:"flex flex-col w-full sm:w-1/2 gap-4 bg-interactive-interactive01 dark:bg-interactive-interactive01 rounded-[10px] p-4 h-[max-content]"},c.createElement(C,{hash:e}),c.createElement(w,{hash:e}),c.createElement(y,{hash:e}),c.createElement("div",{className:"border-b-[var(--colors-border-line)] border-b border-solid"}),c.createElement(I,{hash:e}),c.createElement(O,{hash:e}))),D=({hash:e,onClose:t})=>(0,c.useMemo)((()=>c.createElement(c.Fragment,null,c.createElement(h,{hash:e,onClose:t}),c.createElement(L,{hash:e}))),[e,t]),k=()=>{const[e,t]=(0,c.useState)(""),{ee:a,usePositionDetail:n}=(0,c.useContext)(m.C),{onPositionDetailOpen:s,useIsDegenMode:r}=n(),u=r(),{isMobile:d}=(0,i.F)(),h=(0,c.useCallback)((()=>{t("")}),[]),p=(0,c.useCallback)((({hash:e})=>{null==s||s(u(e)),t(e)}),[u,s]);return(0,c.useEffect)((()=>(a.on("MODAL_POSITION_DETAIL_CLOSE",h),a.on("MODAL_POSITION_DETAIL_OPEN",p),()=>{a.off("MODAL_POSITION_DETAIL_CLOSE",h),a.off("MODAL_POSITION_DETAIL_OPEN",p)})),[a,h,p]),d?c.createElement(l.yo,{open:Boolean(e)},c.createElement(l.ue,{side:"bottom",className:"w-full border-none px-4 py-6 bg-interactive-interactiveBg",onPointerDownOutside:h},c.createElement(D,{hash:e,onClose:h}))):c.createElement(o.Vq,{open:Boolean(e)},c.createElement(o.PK,null,c.createElement(o.cZ,{className:"w-full sm:w-[750px] sm:min-w-[750px] p-4 sm:min-h-[332px]",onPointerDownOutside:h},c.createElement(D,{hash:e,onClose:h}))))}},97506:(e,t,a)=>{a.d(t,{m:()=>N});var i=a(50650),n=a(33266),s=a(44050),l=a(54675),o=a(56420),r=a(24121),c=a(34221),u=a(42623),d=a(93985),m=a(52983),h=a(11852),p=a(43680),x=a(32291),f=a(43408),g=a(38528),b=a(59712),E=function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function l(e){try{r(i.next(e))}catch(e){s(e)}}function o(e){try{r(i.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,o)}r((i=i.apply(e,t||[])).next())}))};const v={markPrice:"-",ROI:"-",PNL:"-"},P=({hash:e,checked:t,onClose:a,snapshotRef:l,onCheckedChange:o,copy:c,download:u})=>{const[d,x]=(0,m.useState)(v),{locale:b,getI18n:E,useMarkPrice:P,usePositionDetail:N,useTheme:C,staticHost:w,siteHost:y}=(0,m.useContext)(g.C),{usePositionDetailSymbol:I,usePositionDetailLeverage:O,usePositionDetailPNLROI:L,usePositionDetailEntryPrice:D,usePositionDetailPricePrecision:k}=N(),{isLight:S}=C(),{PNLFormatted:M,ROI:_,marginSymbol:R}=L(e),{symbol:A,isLong:T}=I(e),F=P(A),z=O(e),Z=D(e),B=k(A),{address:q}=(0,r.mA)(),{isMobile:U}=(0,i.F)(),V=(0,f.e)({staticHost:w});return(0,m.useEffect)((()=>{void 0!==F&&d.markPrice===v.markPrice&&x({markPrice:F,ROI:_,PNL:M})}),[M,_,F]),m.createElement("div",{className:"flex flex-col"},a&&m.createElement(n.M,{width:"24px",height:"24px",fontSize:"24px",className:"text-t-third cursor-pointer absolute top-[8px] right-[8px] z-[1]",onClick:a}),m.createElement(h.L,{data:{hash:e,locale:b||"en",symbol:A,tokenInSymbol:R,closeTime:0,side:T?"LONG":"SHORT",leverage:z,markPrice:Number(d.markPrice)>0?(0,s.uf)(d.markPrice,B):"-",entryPrice:Z,closePrice:"-",PNL:d.PNL,ROI:d.ROI,isLightTheme:S,staticResource:V,SITE_HOST:y,userAddress:q,getI18n:E,sharePNL:t,snapshotRef:l}}),!U&&m.createElement(m.Fragment,null,m.createElement(p.k,{className:"pt-[12px] pb-[24px]",getI18n:E,checked:t,onCheckedChange:o}),m.createElement(p.n,{getI18n:E,copy:c,download:u})))},N=()=>{const{selectedNetworkId:e}=(0,c.o6)(),t=(0,r.xx)({chainId:e}),a=(0,u.pT)(t),{ee:n,getI18n:s,siteHost:h,locale:p}=(0,m.useContext)(g.C),[v,N]=(0,m.useState)(""),[C,w]=(0,m.useState)(!1),[y,I]=(0,m.useState)(!1),{isMobile:O}=(0,i.F)(),L=(0,m.useRef)(),D=(0,m.useMemo)((()=>(0,f.O)({network:null==a?void 0:a.apiNetwork,siteHost:h,locale:p,hash:v,sharePNL:y})),[null==a?void 0:a.apiNetwork,h,p,v,y]),k=(0,m.useCallback)((()=>E(void 0,void 0,void 0,(function*(){try{yield(0,l.v)(D),(0,d.PV)(s("share-copy-message","Copy Successfully"),{variant:"success"})}catch(e){b.error(e)}}))),[s,D]),S=(0,m.useCallback)((()=>E(void 0,void 0,void 0,(function*(){L.current&&(0,o.Q)({el:L.current,success(e){(0,o.L)(e,`share-position-${Date.now()}`)}})}))),[]),M=(0,m.useCallback)((e=>{"boolean"==typeof e&&I(e)}),[]),_=(0,m.useCallback)((()=>{N("")}),[]);return(0,m.useEffect)((()=>n.on("MODAL_POSITION_SHARE_OPEN",(({hash:e,overlay:t})=>{N(e),w(t)}))),[n]),(0,m.useEffect)((()=>n.on("MODAL_POSITION_SHARE_CLOSE",(()=>{N(""),w(!1)}))),[n]),(0,m.useMemo)((()=>v?O?m.createElement(x.V,{hash:v,onClose:_,getI18n:s,checked:y,onCheckedChange:M,copy:k,download:S},m.createElement(P,{hash:v,checked:y,snapshotRef:L})):m.createElement(x.t,{onClose:_,overlay:C},m.createElement(P,{hash:v,checked:y,onClose:_,onCheckedChange:M,copy:k,download:S,snapshotRef:L})):null),[k,S,s,v,O,M,_,C,y])}},38528:(e,t,a)=>{a.d(t,{C:()=>i});const i=a(52983).createContext({})},52098:(e,t,a)=>{a.d(t,{O:()=>i});const i={Classic:"Classic",Dumb:"Dumb"}},5549:(e,t,a)=>{a.d(t,{Z:()=>i});const i=a(52983).createContext({})},79705:(e,t,a)=>{a.d(t,{ee:()=>i});const i=new(a(45648).v)},99883:(e,t,a)=>{a.d(t,{m:()=>n});var i=a(52983);const n=i.memo((({percent:e=0,size:t=100,reverse:a=!1,round:n=!1,width:s=20,color:l="#000",bgColor:o="#000",id:r="canvas-circle-progress",style:c={},...u})=>{const d=(0,i.useMemo)((()=>t/2),[t]),m=(0,i.useCallback)((()=>{const i=document.getElementById(r);if(!i||!i.getContext)return;const c=i.getContext("2d");if(!c)return null;window.devicePixelRatio&&(i.width=t*window.devicePixelRatio,i.height=t*window.devicePixelRatio,c.scale(window.devicePixelRatio,window.devicePixelRatio)),c.lineWidth=s,c.strokeStyle=o,c.lineCap=n?"round":"butt",c.beginPath(),c.arc(d,d,d-s/2,0,2*Math.PI),c.stroke();const u=e/100*2;return c.strokeStyle=l,c.lineCap=n?"round":"butt",c.beginPath(),c.arc(d,d,d-s/2,-Math.PI/2,a?-Math.PI/2-u*Math.PI:u*Math.PI-Math.PI/2,a),c.stroke(),r}),[e,t,a,n,s,l,o,r,d]);return(0,i.useEffect)((()=>{m()}),[m]),i.createElement("canvas",{id:r,style:{width:t,height:t,...c},...u})}));n.displayName="CircleProgress"},18972:(e,t,a)=>{a.d(t,{o:()=>n});var i=a(52983);const n=e=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",...e},i.createElement("path",{d:"M12 6a1 1 0 00-1 1v4H7a1 1 0 100 2h4v4a1 1 0 102 0v-4h4a1 1 0 100-2h-4V7a1 1 0 00-1-1z"}),i.createElement("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10 10-4.477 10-10zm-2 0a8 8 0 10-16 0 8 8 0 0016 0z",clipRule:"evenodd"}))}}]);